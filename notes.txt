[TODO]
0.for iarc eval.
1.first thing to do -> for git publish.
2.first thing after publish -> for chrome app publish.
3.definitely needs to be done, but can wait.
5.need re-eval.

app:
  0.decide the app name.

  0.prepare iarc package.
    take screen shots.
    write a readme in docs (with screen shots).
    upload only necessary files to docs.

  1.paste text from outside does not work -- seems to be making image item.

  2.change key modifier from shift to control.[M]
    probably need to stop propagate the key events.

  2.save overhaul.
    spinner.
    save done message.
    leave page w/o save warning.
    auto-save.
    google docs.

  3.chrome extension / app packaging.
    move static dom building and dom for saving file into ejs.
    shortcut key to open scratch pad from any page.

  3.text style set up screen.
    border width/color, font-size, line-height, text color, and text-shadow.
    vertical text.
    make a separate html tab first and then iframe dialog over main page.

  3.color set up screen.
    move color adjustment to a different app.
    make a separate html tab first and then iframe dialog over main page.

  3.brush set up screen.
    move brush parameters to a different app.
    show only tool control that are meaningful for the selected tool.
    ink stroke parameter contorl (iri/nuki length and speed sensitivity).
    random brush control.
    gradient brush control.
    make a separate html tab first and then iframe dialog over main page.

  3.page config screen.
    background texture image selection.
    default text style.
    http://subtlepatterns.com/
    make a separate html tab first and then iframe dialog over main page.

  3.screen capture of the entire page (outside of scroll region too).

  5.hex control overhaul.
    drag hex and keep selected region fixed in screen.

  5.make view control keys work in all modes.
    rotate and scale mode.
    maybe not for the draw / stencil mdoe since that's harder.

  5.copy to internalize the pasted image.

  5.store in dropbox.
    store note in html format.
    load saved note.
    store app config.

viewport:
  2.exit or adjust in draw mode when resize viewport.
    trying to capture 'resize' of input_layer in dispatcher, but not working...
    need to capture window's resize.

  2.consider putting selection marker inside viewport xform.
    need one more level of div for xform which holds the marker and itemlist.
    -> need to modify save / load code too.

  3.viewport control by mouse.[A]
    scaling control still needs to be done by buttons / keys.

  >>[A][B][L]3.selection of drag viewport mode.
    enabeld on in list mode (or maybe also text mode).
    viewport move / rotate.
    selection (box select).
    change pointer cursor too.
    need the mode indicator too.

  >>[M]3.override browser keys for zoom in/out and back to default ctrl-{+-0}
    preventDefault doesn't seem to be working.

  3.viewport follow cursor in text mode.

  4.viewport rotate (mouse) and flip (button?).[B]

  >>[D]4.zoom with rectangle drawing.

  5.smooth scroll viewport translate with arrow keys in list mode.
    css animation?

buttons:
  0.better global button rendering.
    separate section for new drawing, text, and paste.
    separate section for zoom.
    separate section for selection.

  0.individual button show/hide for selection state change.
    with animation.
    use action's valid/invalid flags.
    no keys should work for selection buttons when inactive.

  2.css: change mouse cursor for button hover.

  3.button icon.
    try http://fortawesome.github.io/Font-Awesome/
    find icons from www.flaticon.com.
    http://www.elegantthemes.com/blog/resources/elegant-icon-font
    http://www.hongkiat.com/blog/webfont-icons/

  3.change tool box controls to buttons.[N]
    alpha lock (for image).
      need a toggle button.
      move from list mode to image mode.
    alpha value control.

selection:
  1.shift-click to add second selection removes selection class from the first
      one.

  2.make item primary selection (ones with focus) visually different in css.

  2.display number of selected items and their type (image / text).

  3.drag handle.
    move, rotate, scale.

  3.hide selection during drag items.

  3.additive select by default.
    esc key or unselect button to clear the selectin.

  3.selection become small (zero size?) after image draw or merging two image
      items -- doesn't always happen...

  3.item flip vert/horiz.

  3.marker - cover the area of rotated items.

  3.box select items.[L]
    also additive / subtractive select.

  3.drag control handle show/hide.
    this selection should stick thru selection changes.
    need the mode indicator too.

  3.copy/cut/paste selected items.

  4.lasso for item selection.[D]

  4.toggle for additive select / click to select (unselect everything else).

  5.key to expand selection up / down in overlapped z order.

  5.smart position of the selection box.
    so that it won't go outside of view.
    so it won't overlap with other buttons.

list mode:
  1.consistent item focus outline rendering.
    for images too.
    make sure to move the focus for selection changes.

  2.go up to the list page (shift-'u') is too easy.

  2.rotate and scale mode don't work when mouse cursor outside of the item.

  3.text item width control.
    or height for vertical text.

  3.scale / translate view to show all selected.

  3.list mode undo.

  3.make 'h' to hold item work.

  3.apply rotate and scale mouse drag to all the selected items.
    not just the primary selection.
    with the center of rotation / scaling at the center of all items.

  4.draw guide to define drawing area.
    like width=1000px for XGA.

  4.perspective guide lines with svg.

  4.css perspective transform both image and text.

  5.item scale x and y separately.

text item / mode:
  1.keep browser focus in the text box.
    if outside clicked, bounce focus back.

  1.no browser selection of other ui components.

  1.text layout strange while adding new text item.

  1.text cursor not visible when typing in a new text.
    when there's nothing.

  1.select the text item after escaping from text edit mode.

  2.css: nowhere but text items are user selectable.
    but image items can take focus.
    texts in palette are selectable?

  3.edit mode key controls (with ctrl).
    go to the beginning / end of the text.
    go to the beginning / end of line.
    'esc'.
    split into another item.
    drop the 'i' and 'e' list mode keys.

image mode:
  2.alpha lock mode indicator.
    alphabet letter on cursor sometimes shows up...

  2.selected stroke indicator.

  2.display image state somewhere (in draw mode too) -- transform and
      alpha_lock.

  2.color control '[' and ']' not working -- both bring values up.

  2.brush param control ',' and '.' not working -- both bring values up.

  3.make buttons for all actions.

  3.command list based undo (not image copies).

  3.stroke
    3.random position, rotation, size, color, image, etc.[E]
    3.image brush.
    3.gradient brush -- one dot with gradient (gradient with transparency
        possible?).[G]
    3.brushes to fill between stroke sample points where brush went too fast.
    3.brushes to average out sample point positions for smoother storokes.
    4.ink stroke to use timing information for the stroke width.

  3.tool selection icons (same as tool sample) on the right edge with keyboard
      key assignment.

  4.brush pressure.
    wacom pen pressure support?
    https://github.com/ZaneA/WacomWebPlugin

  5.draw with rotate state kept.
    scaling?

image filters:
  4.blend modes.
    no preview -- just compute in js.

  4.blur.

  4.image color correction.

stencil mode:
  2.drop color and alpha selection / adjustment.

  3.make buttons for all actions.

  3.make stencil with scaled / rotated images work.
    or disable, or something...

code clean up:
  1.move logic from editor/List etc to actions.

  1.split files > 100 lines.

  >>[N]2.get rid of the form tag.

bug:
  2.'n' / shift-'n' for z control in list mode doesn't seem to be working.

  2.esc from draw mode fails if there is another image with higher (closer) z.

  2.make sure drawing surface coord system is right:
    with viewport xforms
    with item xforms (when editing an image item).
    and write test.

  2.after marge two images, marker doesn't cover the entire new image boundary.

  2.no draw cursor when gone into draw mode.
    -> cursor appears when brush changed.

  3.marker doesn't move if drag item ends with cursor on top of another item.

  3.shift-enter during text input width Japanese IME throws exception.

  3.list mode copy xformed text -> make a copy with xform dropped.
    image copy works fine with xform.

  3. make hsl parameter not go over the limit by mapping to [0, 1].

  >>[N]4.toggle alpha lock in list mode not working.

  >>[N]4.blend alpha control in list mode not working.

  4.stencile mode:
    sometimes -- change brush and immediately drawing.
      stroke's draw is called w/ color member null.

  4.list mode palette -> alpha hex control is not working.

  4.smudge leaves dark area around edge.

  4.drawing with low alpha brush repeatedly doesn't reach alph=1.0.

  4.extension only: saved page doesn't get the background image when loaded.



[code style]
- Class names: camel case starts with upper case. Same file name.
  drop class name after '::' if that's the first class in the file.
- Method and member names: camel case starts with lower case.
- Func params and local vars: names with underscore.



<link href="http://fonts.googleapis.com/css?family=Fredericka+the+Great|Montez|Over+the+Rainbow|Mystery+Quest|Indie+Flower" rel="stylesheet" type="text/css">

font-family: 'Indie Flower', cursive;
font-family: 'Mystery Quest', cursive;
font-family: 'Fredericka the Great', cursive;
font-family: 'Montez', cursive;
font-family: 'Over the Rainbow', cursive;
font-family: 'Mystery Quest', cursive;
